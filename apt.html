<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Persistent Threats (APT) - CyberSec Learning Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">

    <style>
        .orbitron {
            font-family: 'Orbitron', sans-serif;
        }

        .visualization-card {
            transition: all 0.3s ease;
        }

        .visualization-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        .network-node {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .network-link {
            position: absolute;
            background-color: #888;
            height: 2px;
            transform-origin: left center;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 1s infinite;
        }
        .traffic-line {
            position: absolute;
            height: 2px;
            background-color: #4CAF50;
            transition: width 0.5s linear;
        }
    </style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-200">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-800 shadow-lg fixed top-0 left-0 right-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="orbitron text-2xl font-bold text-blue-500 dark:text-blue-400">CyberSec Hub</a>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <div class="dropdown relative">
                        <button class="text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400 focus:outline-none">
                            Threats <i class="fas fa-chevron-down ml-1"></i>
                        </button>
                        <div class="dropdown-menu">
                            <a href="phishing.html">Phishing</a>
                            <a href="spoofing.html">Spoofing</a>
                            <a href="adware.html">Adware</a>
                            <a href="ddos.html">DDoS</a>
                            <a href="mitm.html">Man-in-the-Middle</a>
                            <a href="sql-injection.html">SQL Injection</a>
                            <a href="zero-day.html">Zero-Day Exploits</a>
                            <a href="ransomware.html">Ransomware</a>
                            <a href="apt.html">APT</a>
                            <a href="credential-stuffing.html">Credential Stuffing</a>
                            <a href="xss.html">Cross-Site Scripting (XSS)</a>
                            <a href="ai-attacks.html">AI-Powered Attacks</a>
                            <a href="clickjacking.html">Clickjacking</a>
                            <a href="session-hijacking.html">Session Hijacking</a>
                            <a href="social-engineering.html">Social Engineering</a>
                        </div>
                    </div>
                    <a href="risk_assessment.html" class="text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400">Risk Assessment</a>
                    <a href="threat_map.html" class="text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400">Threat Map</a>
                    <a href="about.html" class="text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400">About</a>
                    <button id="darkModeToggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700">
                        <i class="fas fa-moon dark:text-yellow-300 text-gray-600"></i>
                    </button>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobileMenuButton" class="text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400 focus:outline-none">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile menu -->
        <div id="mobileMenu" class="md:hidden hidden bg-white dark:bg-gray-800 shadow-lg">
            <div class="dropdown">
                <button class="w-full text-left py-2 px-4 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    Threats <i class="fas fa-chevron-down ml-1"></i>
                </button>
                <div class="dropdown-menu">
                    <a href="phishing.html">Phishing</a>
                    <a href="spoofing.html">Spoofing</a>
                    <a href="adware.html">Adware</a>
                    <a href="ddos.html">DDoS</a>
                    <a href="mitm.html">Man-in-the-Middle</a>
                    <a href="sql-injection.html">SQL Injection</a>
                    <a href="zero-day.html">Zero-Day Exploits</a>
                    <a href="ransomware.html">Ransomware</a>
                    <a href="apt.html">APT</a>
                    <a href="credential-stuffing.html">Credential Stuffing</a>
                    <a href="xss.html">Cross-Site Scripting (XSS)</a>
                    <a href="ai-attacks.html">AI-Powered Attacks</a>
                    <a href="clickjacking.html">Clickjacking</a>
                    <a href="session-hijacking.html">Session Hijacking</a>
                    <a href="social-engineering.html">Social Engineering</a>
                </div>
            </div>
            <a href="risk_assessment.html" class="block py-2 px-4 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">Risk Assessment</a>
            <a href="threat_map.html" class="block py-2 px-4 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">Threat Map</a>
            <a href="about.html" class="block py-2 px-4 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">About</a>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto p-4">
        <h1 class="orbitron text-4xl font-bold mb-8 text-center">Advanced Persistent Threats (APT)</h1>

        <!-- Overview Section -->
        <section class="mb-12">
            <h2 class="orbitron text-2xl font-semibold mb-4">Overview</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-2">Technical Explanation</h3>
                    <p>An Advanced Persistent Threat (APT) is a prolonged and targeted cyberattack in which an intruder
                        gains access to a network and remains undetected for an extended period. APTs are typically
                        conducted by sophisticated threat actors, such as nation-state groups, and are aimed at
                        high-value targets like large corporations or government entities.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-2">Real-life Metaphor</h3>
                    <p>Imagine a skilled burglar who doesn't just break into a house for a quick theft, but instead
                        moves in secretly, living in the attic for months or even years. They slowly gather valuable
                        information, make copies of important documents, and monitor the homeowners' activities. This
                        long-term, stealthy approach is similar to how APTs operate in the digital world.</p>
                </div>
            </div>
        </section>

        <!-- Case Studies Section -->
        <section class="mb-12">
            <h2 class="orbitron text-2xl font-semibold mb-4">Real-World APT Case Studies</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Operation Aurora (2009)</h3>
                    <p class="mb-4">A series of cyber attacks conducted by advanced persistent threats such as the Elderwood Group based in Beijing, China, with ties to the People's Liberation Army.</p>
                    <ul class="list-disc list-inside">
                        <li>Targeted: Google, Adobe, and dozens of other companies</li>
                        <li>Goal: Intellectual property theft</li>
                        <li>Method: Spear-phishing and zero-day exploits</li>
                    </ul>
                </div>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Stuxnet (2010)</h3>
                    <p class="mb-4">A malicious computer worm, first uncovered in 2010, thought to have been in development since at least 2005.</p>
                    <ul class="list-disc list-inside">
                        <li>Targeted: Iran's nuclear program</li>
                        <li>Goal: Sabotage industrial systems</li>
                        <li>Method: Exploited multiple zero-day vulnerabilities</li>
                    </ul>
                </div>
            </div>
        </section>


        <!-- Visualize Section -->
        <section class="mb-12">
            <h2 class="orbitron text-2xl font-semibold mb-4">Visualize</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="visualization-card bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                    <div class="mb-4 relative">
                        <i class="fas fa-user-secret text-5xl text-red-500"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Stealthy Infiltration</h3>
                    <p class="text-gray-600 dark:text-gray-400">APTs use sophisticated techniques to gain and maintain
                        access without detection.</p>
                </div>
                <div class="visualization-card bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                    <div class="mb-4 relative">
                        <i class="fas fa-hourglass-half text-5xl text-yellow-500"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Long-Term Presence</h3>
                    <p class="text-gray-600 dark:text-gray-400">APTs maintain a presence in the target network for
                        extended periods, often months or years.</p>
                </div>
                <div class="visualization-card bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                    <div class="mb-4 relative">
                        <i class="fas fa-bullseye text-5xl text-green-500"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Targeted Attacks</h3>
                    <p class="text-gray-600 dark:text-gray-400">APTs focus on specific high-value targets with clear
                        objectives.</p>
                </div>
            </div>
        </section>

        <!-- APT Lifecycle Section -->
        <section class="mb-12">
            <h2 class="orbitron text-2xl font-semibold mb-4">APT Lifecycle</h2>
            <div id="aptLifecycle" class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <!-- APT lifecycle visualization will go here -->
            </div>
        </section>

        <!-- Add a warning banner -->
        <div class="bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4">
            <p class="text-yellow-700">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                This is an educational simulation. All demonstrations are safe and controlled.
            </p>
        </div>

        <!-- Simulation Section -->
        <section class="mb-12">
            <h2 class="orbitron text-2xl font-semibold mb-4">APT Simulation</h2>
            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <div id="aptSimulation" class="mb-4">
                    <div id="network" class="w-full h-96 bg-gray-200 dark:bg-gray-700 rounded-lg relative overflow-hidden">
                        <!-- Network visualization will go here -->
                    </div>
                </div>
                <div id="trafficVisualization" class="w-full h-24 bg-gray-200 dark:bg-gray-700 rounded-lg relative overflow-hidden mb-4">
                    <!-- Network traffic visualization will go here -->
                </div>
                <div id="systemLogs" class="w-full h-48 bg-gray-200 dark:bg-gray-700 rounded-lg p-4 overflow-y-auto mb-4 font-mono text-sm">
                    <!-- System logs will go here -->
                </div>
                <div class="simulation-controls mt-4">
                    <button id="startSimulation" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">Start Simulation</button>
                    <button id="resetSimulation" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded transition ml-4">Reset Simulation</button>
                    <button id="toggleDefense" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded transition ml-4">Enable Defense</button>
                </div>
                <div id="simulationExplanation" class="mt-4 text-sm text-gray-600 dark:text-gray-400"></div>
            </div>
        </section>

        <!-- Mitigation Strategies Section -->
        <section class="mb-12">
            <h2 class="orbitron text-2xl font-semibold mb-4">APT Mitigation Strategies</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Prevention</h3>
                    <ul class="list-disc list-inside">
                        <li>Implement strong access controls</li>
                        <li>Regular security awareness training</li>
                        <li>Keep systems and software up-to-date</li>
                        <li>Use advanced threat detection tools</li>
                    </ul>
                </div>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Detection</h3>
                    <ul class="list-disc list-inside">
                        <li>Implement network segmentation</li>
                        <li>Use behavior-based detection systems</li>
                        <li>Conduct regular vulnerability assessments</li>
                        <li>Monitor for unusual data transfers</li>
                    </ul>
                </div>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Response</h3>
                    <ul class="list-disc list-inside">
                        <li>Develop an incident response plan</li>
                        <li>Isolate affected systems quickly</li>
                        <li>Conduct thorough forensic analysis</li>
                        <li>Improve defenses based on lessons learned</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Incident Response Scenarios -->
        <section class="mb-12">
            <h2 class="orbitron text-2xl font-semibold mb-4">Incident Response Scenarios</h2>
            <div id="incidentResponseScenarios" class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <div id="scenarioDescription" class="mb-4"></div>
                <div id="scenarioOptions" class="space-y-2"></div>
                <button id="nextScenario" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">Next Scenario</button>
            </div>
        </section>

        <!-- Quiz Section -->
        <section>
            <h2 class="orbitron text-2xl font-semibold mb-4">APT Quiz</h2>
            <div id="quiz" class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <!-- Quiz questions will go here -->
            </div>
            <div id="quizResults" class="mt-4 hidden bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"></div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center">
                <p class="orbitron text-xl mb-4">CyberSec Learning Hub</p>
                <div class="flex justify-center space-x-4">
                    <a href="#" class="hover:text-blue-400"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="hover:text-blue-400"><i class="fab fa-github"></i></a>
                    <a href="#" class="hover:text-blue-400"><i class="fab fa-linkedin"></i></a>
                </div>
                <p class="mt-4 text-gray-400">© 2025 CyberSec Learning Hub. All rights reserved.</p>
                <p class="mt-4 text-gray-400">Made by June Nguyen</p>
            </div>
        </div>
    </footer>

    <script>
        // APT Lifecycle Visualization
        function visualizeAPTLifecycle() {
            const aptLifecycle = document.getElementById('aptLifecycle');
            const stages = [
                {name: 'Initial Reconnaissance', icon: 'fa-search', color: 'blue'},
                {name: 'Initial Compromise', icon: 'fa-user-secret', color: 'red'},
                {name: 'Establish Foothold', icon: 'fa-flag', color: 'green'},
                {name: 'Escalate Privileges', icon: 'fa-level-up-alt', color: 'yellow'},
                {name: 'Internal Reconnaissance', icon: 'fa-binoculars', color: 'purple'},
                {name: 'Lateral Movement', icon: 'fa-arrows-alt-h', color: 'orange'},
                {name: 'Maintain Presence', icon: 'fa-clock', color: 'teal'},
                {name: 'Complete Mission', icon: 'fa-check-circle', color: 'pink'}
            ];

            let html = '<div class="flex flex-wrap justify-center">';
            stages.forEach((stage, index) => {
                html += `
                    <div class="m-2 p-4 bg-${stage.color}-100 rounded-lg shadow-md text-center w-48">
                        <i class="fas ${stage.icon} text-4xl text-${stage.color}-500 mb-2"></i>
                        <h3 class="text-lg font-semibold">${stage.name}</h3>
                        <p class="text-sm text-gray-600">Stage ${index + 1}</p>
                    </div>
                `;
            });
            html += '</div>';

            aptLifecycle.innerHTML = html;

            // Add animation to show progression
            const stageElements = aptLifecycle.querySelectorAll('div > div');
            stageElements.forEach((element, index) => {
                setTimeout(() => {
                    element.classList.add('scale-105', 'shadow-lg');
                    setTimeout(() => {
                        element.classList.remove('scale-105', 'shadow-lg');
                    }, 500);
                }, index * 1000);
            });
        }

        // APT Simulation
        const network = document.getElementById('network');
        const trafficVisualization = document.getElementById('trafficVisualization');
        const systemLogs = document.getElementById('systemLogs');
        const startSimulationBtn = document.getElementById('startSimulation');
        const resetSimulationBtn = document.getElementById('resetSimulation');
        const toggleDefenseBtn = document.getElementById('toggleDefense');
        const simulationExplanation = document.getElementById('simulationExplanation');

        let nodes = [];
        let links = [];
        let attackerNode;
        let targetNode;
        let compromisedNodes = new Set();
        let simulationInterval;
        let simulationStep = 0;
        let defenseEnabled = false;

        function createNode(type, x, y) {
            const node = document.createElement('div');
            node.className = `network-node ${type === 'normal' ? 'bg-blue-500' : type === 'attacker' ? 'bg-red-500' : 'bg-yellow-500'}`;
            node.style.left = `${x}%`;
            node.style.top = `${y}%`;
            node.innerHTML = type === 'attacker' ? '<i class="fas fa-user-secret"></i>' :
                type === 'target' ? '<i class="fas fa-database"></i>' :
                    '<i class="fas fa-desktop"></i>';
            network.appendChild(node);
            return node;
        }

        function createLink(node1, node2) {
            const link = document.createElement('div');
            link.className = 'network-link';
            updateLinkPosition(link, node1, node2);
            network.appendChild(link);
            return link;
        }

        function updateLinkPosition(link, node1, node2) {
            const rect1 = node1.getBoundingClientRect();
            const rect2 = node2.getBoundingClientRect();
            const x1 = rect1.left + rect1.width / 2;
            const y1 = rect1.top + rect1.height / 2;
            const x2 = rect2.left + rect2.width / 2;
            const y2 = rect2.top + rect2.height / 2;
            const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
            const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            link.style.width = `${length}px`;
            link.style.left = `${x1}px`;
            link.style.top = `${y1}px`;
            link.style.transform = `rotate(${angle}deg)`;
        }

        function initializeNetwork() {
            network.innerHTML = '';
            trafficVisualization.innerHTML = '';
            systemLogs.innerHTML = '';
            nodes = [];
            links = [];
            compromisedNodes.clear();

            // Create normal nodes
            for (let i = 0; i < 8; i++) {
                nodes.push(createNode('normal', Math.random() * 80 + 10, Math.random() * 80 + 10));
            }

            // Create attacker node
            attackerNode = createNode('attacker', 5, 50);
            nodes.push(attackerNode);

            // Create target node
            targetNode = createNode('target', 95, 50);
            nodes.push(targetNode);

            // Create links
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    if (Math.random() < 0.3) {
                        links.push(createLink(nodes[i], nodes[j]));
                    }
                }
            }
        }

        function simulateAPT() {
            simulationStep++;
            switch (simulationStep) {
                case 1:
                    simulationExplanation.textContent = "Step 1: Initial Reconnaissance - The attacker scans the network for vulnerabilities.";
                    attackerNode.classList.add('pulse');
                    addTraffic(attackerNode, nodes[0]);
                    addLog("Suspicious network scan detected");
                    break;
                case 2:
                    simulationExplanation.textContent = "Step 2: Initial Compromise - The attacker gains access to the first node.";
                    if (!defenseEnabled || Math.random() < 0.7) {
                        compromiseNode(nodes[0]);
                        addTraffic(attackerNode, nodes[0]);
                        addLog("Unauthorized access detected on Node 1");
                    } else {
                        addLog("Attempted breach on Node 1 blocked by firewall");
                    }
                    break;
                case 3:
                    simulationExplanation.textContent = "Step 3: Establish Foothold - The attacker strengthens their position in the network.";
                    if (!defenseEnabled || Math.random() < 0.6) {
                        compromiseNode(nodes[1]);
                        addTraffic(nodes[0], nodes[1]);
                        addLog("Suspicious activity detected on Node 2");
                    } else {
                        addLog("Unusual process terminated on Node 1");
                    }
                    break;
                case 4:
                    simulationExplanation.textContent = "Step 4: Escalate Privileges - The attacker gains higher-level access rights.";
                    if (!defenseEnabled || Math.random() < 0.5) {
                        nodes[0].innerHTML = '<i class="fas fa-user-shield"></i>';
                        nodes[1].innerHTML = '<i class="fas fa-user-shield"></i>';
                        addLog("Privilege escalation detected on compromised nodes");
                    } else {
                        addLog("Unauthorized privilege escalation attempt blocked");
                    }
                    break;
                case 5:
                    simulationExplanation.textContent = "Step 5: Internal Reconnaissance - The attacker explores the network further.";
                    attackerNode.classList.remove('pulse');
                    nodes[0].classList.add('pulse');
                    nodes[1].classList.add('pulse');
                    addTraffic(nodes[1], nodes[2]);
                    addTraffic(nodes[1], nodes[3]);
                    addLog("Unusual internal network scanning detected");
                    break;
                case 6:
                    simulationExplanation.textContent = "Step 6: Lateral Movement - The attacker spreads to other nodes in the network.";
                    if (!defenseEnabled || Math.random() < 0.4) {
                        compromiseNode(nodes[2]);
                        compromiseNode(nodes[3]);
                        addTraffic(nodes[1], nodes[2]);
                        addTraffic(nodes[1], nodes[3]);
                        addLog("Multiple systems showing signs of compromise");
                    } else {
                        addLog("Lateral movement attempt detected and blocked");
                    }
                    break;
                case 7:
                    simulationExplanation.textContent = "Step 7: Maintain Presence - The attacker ensures long-term access to the network.";
                    nodes.forEach(node => {
                        if (compromisedNodes.has(node)) {
                            node.classList.add('pulse');
                            addTraffic(node, attackerNode);
                        }
                    });
                    addLog("Persistent connections established from multiple nodes");
                    break;
                case 8:
                    simulationExplanation.textContent = "Step 8: Complete Mission - The attacker reaches the target and exfiltrates data.";
                    if (!defenseEnabled || Math.random() < 0.3) {
                        compromiseNode(targetNode);
                        targetNode.classList.add('pulse');
                        addTraffic(nodes[3], targetNode);
                        addTraffic(targetNode, attackerNode);
                        addLog("Large data transfer detected from target node");
                    } else {
                        addLog("Suspicious data transfer blocked, potential data exfiltration attempt");
                    }
                    clearInterval(simulationInterval);
                    startSimulationBtn.textContent = 'Simulation Complete';
                    startSimulationBtn.disabled = true;
                    break;
            }
        }

        function compromiseNode(node) {
            node.classList.remove('bg-blue-500');
            node.classList.add('bg-red-500', 'fade-in');
            compromisedNodes.add(node);
        }

        function addTraffic(from, to) {
            const line = document.createElement('div');
            line.className = 'traffic-line';
            const fromRect = from.getBoundingClientRect();
            const toRect = to.getBoundingClientRect();
            const startX = fromRect.left + fromRect.width / 2;
            const startY = fromRect.top + fromRect.height / 2;
            const endX = toRect.left + toRect.width / 2;
            const endY = toRect.top + toRect.height / 2;
            const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
            const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
            
            line.style.width = '0';
            line.style.left = `${startX}px`;
            line.style.top = `${startY}px`;
            line.style.transform = `rotate(${angle}deg)`;
            
            trafficVisualization.appendChild(line);
            
            setTimeout(() => {
                line.style.width = `${length}px`;
            }, 50);
            
            setTimeout(() => {
                line.remove();
            }, 2000);
        }

        function addLog(message) {
            const log = document.createElement('div');
            log.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.className = 'mb-1';
            systemLogs.appendChild(log);
            systemLogs.scrollTop = systemLogs.scrollHeight;
        }

        startSimulationBtn.addEventListener('click', () => {
            if (startSimulationBtn.textContent === 'Start Simulation') {
                simulationStep = 0;
                simulationInterval = setInterval(simulateAPT, 3000);
                startSimulationBtn.textContent = 'Pause Simulation';
            } else if (startSimulationBtn.textContent === 'Pause Simulation') {
                clearInterval(simulationInterval);
                startSimulationBtn.textContent = 'Resume Simulation';
            } else if (startSimulationBtn.textContent === 'Resume Simulation') {
                simulationInterval = setInterval(simulateAPT, 3000);
                startSimulationBtn.textContent = 'Pause Simulation';
            }
        });

        resetSimulationBtn.addEventListener('click', () => {
            clearInterval(simulationInterval);
            initializeNetwork();
            simulationStep = 0;
            simulationExplanation.textContent = '';
            startSimulationBtn.textContent = 'Start Simulation';
            startSimulationBtn.disabled = false;
        });

        toggleDefenseBtn.addEventListener('click', () => {
            defenseEnabled = !defenseEnabled;
            toggleDefenseBtn.textContent = defenseEnabled ? 'Disable Defense' : 'Enable Defense';
            toggleDefenseBtn.classList.toggle('bg-green-500');
            toggleDefenseBtn.classList.toggle('bg-red-500');
            addLog(defenseEnabled ? "Defense mechanisms activated" : "Defense mechanisms deactivated");
        });

        // Incident Response Scenarios
        const scenarioDescription = document.getElementById('scenarioDescription');
        const scenarioOptions = document.getElementById('scenarioOptions');
        const nextScenarioBtn = document.getElementById('nextScenario');

        const scenarios = [
            {
                description: "You detect unusual outbound traffic from a server containing sensitive data. What's your first step?",
                options: [
                    { text: "Immediately shut down the server", correct: false },
                    { text: "Monitor the traffic and gather more information", correct: true },
                    { text: "Ignore it as it's probably a false positive", correct: false },
                    { text: "Inform all employees about the potential breach", correct: false }
                ]
            },
            {
                description: "An employee reports receiving a suspicious email with an attachment. What action do you take?",
                options: [
                    { text: "Tell the employee to delete the email immediately", correct: false },
                    { text: "Open the attachment in a secure environment to investigate", correct: true },
                    { text: "Forward the email to all staff as an example", correct: false },
                    { text: "Ignore it as spam filters should catch malicious emails", correct: false }
                ]
            },
            {
                description: "Your intrusion detection system alerts you to a potential SQL injection attack. How do you respond?",
                options: [
                    { text: "Shut down all database servers", correct: false },
                    { text: "Immediately patch all systems without testing", correct: false },
                    { text: "Investigate the alert and isolate affected systems", correct: true },
                    { text: "Ignore it as web application firewalls should prevent SQL injection", correct: false }
                ]
            }
        ];

        let currentScenario = 0;

        function displayScenario() {
            const scenario = scenarios[currentScenario];
            scenarioDescription.textContent = scenario.description;
            scenarioOptions.innerHTML = '';
            scenario.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.className = 'w-full text-left p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700';
                button.addEventListener('click', () => checkAnswer(index));
                scenarioOptions.appendChild(button);
            });
        }

        function checkAnswer(index) {
            const scenario = scenarios[currentScenario];
            const buttons = scenarioOptions.getElementsByTagName('button');
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].disabled = true;
                if (i === index) {
                    buttons[i].classList.add(scenario.options[i].correct ? 'bg-green-500' : 'bg-red-500');
                }
                if (scenario.options[i].correct) {
                    buttons[i].classList.add('bg-green-500');
                }
            }
        }

        nextScenarioBtn.addEventListener('click', () => {
            currentScenario = (currentScenario + 1) % scenarios.length;
            displayScenario();
        });

        // Initialize page content
        document.addEventListener('DOMContentLoaded', () => {
            initializeNetwork();
            visualizeAPTLifecycle();
            setupQuiz();
            displayScenario();
        });

        // Quiz functionality
        function setupQuiz() {
            const quiz = document.getElementById('quiz');
            const quizResults = document.getElementById('quizResults');
            const questions = [
                {
                    question: "What does APT stand for?",
                    answers: [
                        "Advanced Persistent Threat",
                        "Automated Penetration Test",
                        "Application Programming Technique",
                        "Adaptive Protection Technology"
                    ],
                    correct: 0
                },
                {
                    question: "Which of the following is NOT typically a characteristic of APTs?",
                    answers: [
                        "Long-term presence in the target network",
                        "Highly sophisticated attack techniques",
                        "Immediate, noticeable impact on the target",
                        "Specific, high-value targets"
                    ],
                    correct: 2
                },
                {
                    question: "What is often the primary goal of an APT attack?",
                    answers: [
                        "Immediate financial gain",
                        "Disruption of services",
                        "Long-term data exfiltration",
                        "Reputation damage"
                    ],
                    correct: 2
                }
            ];

            let quizHTML = '';
            questions.forEach((q, index) => {
                quizHTML += `
                    <div class="mb-4">
                        <p class="font-semibold mb-2">${index + 1}. ${q.question}</p>
                        ${q.answers.map((answer, i) => `
                            <label class="block mb-2">
                                <input type="radio" name="q${index}" value="${i}" class="mr-2">
                                ${answer}
                            </label>
                        `).join('')}
                    </div>
                `;
            });
            quizHTML += '<button id="submitQuiz" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">Submit Answers</button>';
            quiz.innerHTML = quizHTML;

            document.getElementById('submitQuiz').addEventListener('click', () => {
                let score = 0;
                questions.forEach((q, index) => {
                    const selected = document.querySelector(`input[name="q${index}"]:checked`);
                    if (selected && parseInt(selected.value) === q.correct) {
                        score++;
                    }
                });
                quizResults.innerHTML = `
                    <h3 class="text-xl font-semibold mb-2">Quiz Results</h3>
                    <p>You scored ${score} out of ${questions.length}.</p>
                `;
                quizResults.classList.remove('hidden');
            });
        }

        // Initialize page content
        document.addEventListener('DOMContentLoaded', () => {
            initializeNetwork();
            visualizeAPTLifecycle();
            setupQuiz();
        });
    </script>
    <script src="script.js"></script>

</body>

</html>